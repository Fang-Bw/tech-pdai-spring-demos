# 1.运行背景
## 使用了mybatis_test库

# 2.组件
```
（1）数据库实体：定义业务类和数据库字段的映射
        需要注意类里的字段和数据库字段是否匹配
（2）Mapper：定义查询语法
```

# 3.架构
```
架构分为3层

API接口层：提供给外部使用的接口API，开发人员通过这些本地API来操纵数据库。接口层一接收到调用请求就会调用数据处理层来完成具体的数据处理。
数据处理层：负责具体的SQL查找、SQL解析、SQL执行和执行结果映射处理等。它主要的目的是根据调用的请求完成一次数据库操作。
基础支撑层：负责最基础的功能支撑，包括连接管理、事务管理、配置加载和缓存处理，这些都是共用的东西，将他们抽取出来作为最基础的组件。为上层的数据处理层提供最基础的支撑。
```

# 4.注意点
```
（1）缓存
    一级缓存：一级缓存是基于SQLSession级别的缓存，默认情况下开启。只要在同一个 SQLSession 内执行相同的 SQL 查询，MyBatis 会使用缓存，而不是每次都去数据库查询。
            每当 SQLSession 关闭时，一级缓存也会被清空；修改数据时，也会清除相关数据的缓存；但两次查询期间，数据发生了变化而没有被mybatis感知，则会查询到旧数据
    二级缓存：二级缓存是基于Mapper级别的缓存。默认情况下它是关闭的，需要在配置文件中手动开启。与一级缓存不同，二级缓存可以跨多个 SQLSession 共享，提升缓存的利用率。要使用二级缓存，必须在 MyBatis 的 Mapper.xml 中通过 <cache/> 标签配置缓存机制。
```

# 5.优化点

## （1）分页
对于大数据量的查询，分页是常见的优化手段。
MyBatis 结合 PageHelper 插件可以实现高效的分页查询。
```
PageHelper
（1）执行步骤
    SQL拦截：
    添加分页参数：
    执行分页查询
    封装分页结果
（2）MySQL底层对于分页查询的处理：
    按照索引排序进行分页可以一定程度提高查询效率；
    但是对于高offset的分页，需要跳过大量数据。可以通过记录上次分页的索引值，按照索引值查找；可以使用缓存
```
## （2）批量操作
```
当进行批量插入、更新或删除时，使用 MyBatis 提供的 ExecutorType.BATCH 执行批量操作
```
## （3）连接池
```
配置连接池时，合理设置连接池的最大连接数和最小空闲数，避免资源浪费或者连接不足影响性能。
推荐使用 DBCP、HikariCP 等高性能的连接池
```